#! /usr/bin/env fish

if status --is-interactive
  # allow git to prompt for passphrase (when expires)
  # export GPG_TTY=$(tty)

  # no need for a greeting
  set fish_greeting

  # source variables
  source ~/.config/fish/variables.fish

  # secrets
  # source ~/.config/fish/secrets.fish

  # source git abbreviations
  source ~/.config/fish/abbr.fish

  # load zoxide (autojump alt)
  zoxide init fish | source

  # kitty completions
  # kitty + complete setup fish | source

  set -x TIME_STYLE long-iso

  set -x MANPAGER "nvim +Man!"

  # https://www.pgcli.com/pager
  set -x LESS "-XFR"

  set -x RIPGREP_CONFIG_PATH "$HOME/.config/ripgrep/ripgreprc"
  set -gx FZF_DEFAULT_COMMAND 'rg --files --hidden --follow --glob "!doc/*"'

  set -gx GOPATH $HOME/go
  set -gx fish_user_paths $GOPATH/bin $fish_user_paths

  switch (uname)
  case Darwin
    # prefer homebrew installed ruby
    fish_add_path /opt/homebrew/opt/ruby/bin
    #             THIS IS SLOW!!! vvv
    # set -g fish_user_paths (gem env gemdir)/bin $fish_user_paths
    # use ruby version installed by homebrew
    set -g fish_user_paths "/opt/homebrew/lib/ruby/gems/3.1.0/bin" $fish_user_paths
    # rust/cargo
    set -g fish_user_paths "$HOME/.cargo/bin/" $fish_user_paths

  case Linux
    set -x GEM_HOME $HOME/.gem/
    # use ruby version installed by pacman
    # add home/bin to path
    set -g fish_user_paths \
      $HOME/.gem/bin \
      $HOME/bin \
      $HOME/bin/workflow \
      $HOME/.node_modules/bin \
      $fish_user_paths

    # globally install node modules in $HOME directory
    set -x NPM_CONFIG_PREFIX $HOME/.node_modules
  end

  # THEME STARSHIP #
  starship init fish | source

  # source colors
  # source ~/.config/fish/colors-tokyonight.fish
  # set_onedark
  # set -x LS_COLORS (vivid generate one-dark)
  # set -x LS_COLORS "ln=0;38;2;255;106;193:su=0:ca=0:mh=0:rs=0:sg=0:cd=0;38;2;255;106;193;48;2;51;51;51:di=0;38;2;97;175;239:or=0;38;2;0;0;0;48;2;224;108;117:pi=0;38;2;0;0;0;48;2;97;175;239:ow=0:no=0:bd=0;38;2;86;182;194;48;2;51;51;51:fi=0:do=0;38;2;0;0;0;48;2;255;106;193:so=0;38;2;0;0;0;48;2;255;106;193:st=0:ex=1;38;2;224;108;117:tw=0:*~=0;38;2;102;102;102:mi=0;38;2;0;0;0;48;2;224;108;117:*.h=0;38;2;152;195;121:*.p=0;38;2;152;195;121:*.a=1;38;2;224;108;117:*.r=0;38;2;152;195;121:*.d=0;38;2;152;195;121:*.t=0;38;2;152;195;121:*.z=4;38;2;86;182;194:*.o=0;38;2;102;102;102:*.m=0;38;2;152;195;121:*.c=0;38;2;152;195;121:*.cc=0;38;2;152;195;121:*.ko=1;38;2;224;108;117:*.la=0;38;2;102;102;102:*css=0;38;2;152;195;121:*.kt=0;38;2;152;195;121:*.js=0;38;2;152;195;121:*.pl=0;38;2;152;195;121:*.so=1;38;2;224;108;117:*.jl=0;38;2;152;195;121:*.rb=0;38;2;152;195;121:*.pp=0;38;2;152;195;121:*.mn=0;38;2;152;195;121:*.ml=0;38;2;152;195;121:*.fs=0;38;2;152;195;121:*.td=0;38;2;152;195;121:*.vb=0;38;2;152;195;121:*.rs=0;38;2;152;195;121:*.el=0;38;2;152;195;121:*.lo=0;38;2;102;102;102:*.cr=0;38;2;152;195;121:*.ps=0;38;2;224;108;117:*.wv=0;38;2;255;106;193:*.gz=4;38;2;86;182;194:*.py=0;38;2;152;195;121:*.xz=4;38;2;86;182;194:*.ts=0;38;2;152;195;121:*.hi=0;38;2;102;102;102:*.rm=0;38;2;255;106;193:*.gv=0;38;2;152;195;121:*.hs=0;38;2;152;195;121:*.ui=0;38;2;229;192;123:*.di=0;38;2;152;195;121:*.bz=4;38;2;86;182;194:*.sh=0;38;2;152;195;121:*.ll=0;38;2;152;195;121:*.ex=0;38;2;152;195;121:*.pm=0;38;2;152;195;121:*.go=0;38;2;152;195;121:*.bc=0;38;2;102;102;102:*.hh=0;38;2;152;195;121:*.cp=0;38;2;152;195;121:*.md=0;38;2;229;192;123:*.nb=0;38;2;152;195;121:*.cs=0;38;2;152;195;121:*.7z=4;38;2;86;182;194:*.as=0;38;2;152;195;121:*.tex=0;38;2;152;195;121:*.ltx=0;38;2;152;195;121:*.hxx=0;38;2;152;195;121:*.xlr=0;38;2;224;108;117:*.tsx=0;38;2;152;195;121:*.rpm=4;38;2;86;182;194:*.ppt=0;38;2;224;108;117:*.otf=0;38;2;255;106;193:*.git=0;38;2;102;102;102:*.ogg=0;38;2;255;106;193:*.epp=0;38;2;152;195;121:*.kts=0;38;2;152;195;121:*.nix=0;38;2;229;192;123:*.mp3=0;38;2;255;106;193:*.iso=4;38;2;86;182;194:*.odp=0;38;2;224;108;117:*.mov=0;38;2;255;106;193:*.csx=0;38;2;152;195;121:*.tcl=0;38;2;152;195;121:*.ind=0;38;2;102;102;102:*TODO=1:*.svg=0;38;2;255;106;193:*.dmg=4;38;2;86;182;194:*.zip=4;38;2;86;182;194:*.dll=1;38;2;224;108;117:*.bcf=0;38;2;102;102;102:*.hpp=0;38;2;152;195;121:*.cgi=0;38;2;152;195;121:*.tar=4;38;2;86;182;194:*.idx=0;38;2;102;102;102:*.eps=0;38;2;255;106;193:*.vob=0;38;2;255;106;193:*.wav=0;38;2;255;106;193:*.tif=0;38;2;255;106;193:*.apk=4;38;2;86;182;194:*.flv=0;38;2;255;106;193:*.odt=0;38;2;224;108;117:*.bag=4;38;2;86;182;194:*.aux=0;38;2;102;102;102:*.gif=0;38;2;255;106;193:*.txt=0;38;2;229;192;123:*.sty=0;38;2;102;102;102:*.kex=0;38;2;224;108;117:*.jpg=0;38;2;255;106;193:*.tgz=4;38;2;86;182;194:*.pps=0;38;2;224;108;117:*.pyd=0;38;2;102;102;102:*.dot=0;38;2;152;195;121:*.vcd=4;38;2;86;182;194:*.asa=0;38;2;152;195;121:*.xmp=0;38;2;229;192;123:*.csv=0;38;2;229;192;123:*.cfg=0;38;2;229;192;123:*.pdf=0;38;2;224;108;117:*.ics=0;38;2;224;108;117:*hgrc=0;38;2;152;195;121:*.bin=4;38;2;86;182;194:*.ipp=0;38;2;152;195;121:*.yml=0;38;2;229;192;123:*.bbl=0;38;2;102;102;102:*.sxw=0;38;2;224;108;117:*.mp4=0;38;2;255;106;193:*.zsh=0;38;2;152;195;121:*.jar=4;38;2;86;182;194:*.dpr=0;38;2;152;195;121:*.tbz=4;38;2;86;182;194:*.bst=0;38;2;229;192;123:*.fsx=0;38;2;152;195;121:*.mpg=0;38;2;255;106;193:*.pod=0;38;2;152;195;121:*.wma=0;38;2;255;106;193:*.ico=0;38;2;255;106;193:*.png=0;38;2;255;106;193:*.blg=0;38;2;102;102;102:*.xls=0;38;2;224;108;117:*.swf=0;38;2;255;106;193:*.bak=0;38;2;102;102;102:*.ppm=0;38;2;255;106;193:*.mli=0;38;2;152;195;121:*.m4v=0;38;2;255;106;193:*.wmv=0;38;2;255;106;193:*.pgm=0;38;2;255;106;193:*.ps1=0;38;2;152;195;121:*.rst=0;38;2;229;192;123:*.php=0;38;2;152;195;121:*.pyo=0;38;2;102;102;102:*.rar=4;38;2;86;182;194:*.vim=0;38;2;152;195;121:*.exe=1;38;2;224;108;117:*.xcf=0;38;2;255;106;193:*.pid=0;38;2;102;102;102:*.dox=0;38;2;152;195;121:*.aif=0;38;2;255;106;193:*.toc=0;38;2;102;102;102:*.pyc=0;38;2;102;102;102:*.fls=0;38;2;102;102;102:*.pkg=4;38;2;86;182;194:*.cxx=0;38;2;152;195;121:*.com=1;38;2;224;108;117:*.bz2=4;38;2;86;182;194:*.deb=4;38;2;86;182;194:*.log=0;38;2;102;102;102:*.htc=0;38;2;152;195;121:*.erl=0;38;2;152;195;121:*.bib=0;38;2;229;192;123:*.c++=0;38;2;152;195;121:*.mkv=0;38;2;255;106;193:*.cpp=0;38;2;152;195;121:*.fnt=0;38;2;255;106;193:*.gvy=0;38;2;152;195;121:*.awk=0;38;2;152;195;121:*.mid=0;38;2;255;106;193:*.doc=0;38;2;224;108;117:*.m4a=0;38;2;255;106;193:*.rtf=0;38;2;224;108;117:*.zst=4;38;2;86;182;194:*.psd=0;38;2;255;106;193:*.out=0;38;2;102;102;102:*.avi=0;38;2;255;106;193:*.bmp=0;38;2;255;106;193:*.ttf=0;38;2;255;106;193:*.sql=0;38;2;152;195;121:*.ods=0;38;2;224;108;117:*.sbt=0;38;2;152;195;121:*.pro=0;38;2;152;195;121:*.pas=0;38;2;152;195;121:*.h++=0;38;2;152;195;121:*.fsi=0;38;2;152;195;121:*.elm=0;38;2;152;195;121:*.xml=0;38;2;229;192;123:*.inc=0;38;2;152;195;121:*.inl=0;38;2;152;195;121:*.htm=0;38;2;229;192;123:*.img=4;38;2;86;182;194:*.pbm=0;38;2;255;106;193:*.lua=0;38;2;152;195;121:*.mir=0;38;2;152;195;121:*.bat=1;38;2;224;108;117:*.exs=0;38;2;152;195;121:*.fon=0;38;2;255;106;193:*.arj=4;38;2;86;182;194:*.tml=0;38;2;229;192;123:*.ini=0;38;2;229;192;123:*.def=0;38;2;152;195;121:*.ilg=0;38;2;102;102;102:*.clj=0;38;2;152;195;121:*.bsh=0;38;2;152;195;121:*.sxi=0;38;2;224;108;117:*.tmp=0;38;2;102;102;102:*.swp=0;38;2;102;102;102:*.toml=0;38;2;229;192;123:*.rlib=0;38;2;102;102;102:*.opus=0;38;2;255;106;193:*.lock=0;38;2;102;102;102:*.hgrc=0;38;2;152;195;121:*.json=0;38;2;229;192;123:*.bash=0;38;2;152;195;121:*.java=0;38;2;152;195;121:*.pptx=0;38;2;224;108;117:*.purs=0;38;2;152;195;121:*.yaml=0;38;2;229;192;123:*.h264=0;38;2;255;106;193:*.dart=0;38;2;152;195;121:*.tbz2=4;38;2;86;182;194:*.html=0;38;2;229;192;123:*.epub=0;38;2;224;108;117:*.psd1=0;38;2;152;195;121:*.webm=0;38;2;255;106;193:*.psm1=0;38;2;152;195;121:*.tiff=0;38;2;255;106;193:*.diff=0;38;2;152;195;121:*.xlsx=0;38;2;224;108;117:*.docx=0;38;2;224;108;117:*.mpeg=0;38;2;255;106;193:*.fish=0;38;2;152;195;121:*.less=0;38;2;152;195;121:*.orig=0;38;2;102;102;102:*.flac=0;38;2;255;106;193:*.make=0;38;2;152;195;121:*.jpeg=0;38;2;255;106;193:*.conf=0;38;2;229;192;123:*.lisp=0;38;2;152;195;121:*.scala=0;38;2;152;195;121:*.patch=0;38;2;152;195;121:*passwd=0;38;2;229;192;123:*.cabal=0;38;2;152;195;121:*shadow=0;38;2;229;192;123:*.dyn_o=0;38;2;102;102;102:*.xhtml=0;38;2;229;192;123:*.cache=0;38;2;102;102;102:*.mdown=0;38;2;229;192;123:*.class=0;38;2;102;102;102:*.ipynb=0;38;2;152;195;121:*.shtml=0;38;2;229;192;123:*.toast=4;38;2;86;182;194:*README=0;38;2;40;44;52;48;2;229;192;123:*.swift=0;38;2;152;195;121:*.cmake=0;38;2;152;195;121:*.gradle=0;38;2;152;195;121:*.groovy=0;38;2;152;195;121:*.matlab=0;38;2;152;195;121:*INSTALL=0;38;2;40;44;52;48;2;229;192;123:*COPYING=0;38;2;153;153;153:*LICENSE=0;38;2;153;153;153:*TODO.md=1:*.dyn_hi=0;38;2;102;102;102:*.ignore=0;38;2;152;195;121:*.flake8=0;38;2;152;195;121:*.config=0;38;2;229;192;123:*.desktop=0;38;2;229;192;123:*.gemspec=0;38;2;152;195;121:*setup.py=0;38;2;152;195;121:*TODO.txt=1:*Doxyfile=0;38;2;152;195;121:*Makefile=0;38;2;152;195;121:*README.md=0;38;2;40;44;52;48;2;229;192;123:*configure=0;38;2;152;195;121:*COPYRIGHT=0;38;2;153;153;153:*.kdevelop=0;38;2;152;195;121:*.markdown=0;38;2;229;192;123:*.cmake.in=0;38;2;152;195;121:*.rgignore=0;38;2;152;195;121:*.fdignore=0;38;2;152;195;121:*.DS_Store=0;38;2;102;102;102:*Dockerfile=0;38;2;229;192;123:*.gitignore=0;38;2;152;195;121:*.localized=0;38;2;102;102;102:*INSTALL.md=0;38;2;40;44;52;48;2;229;192;123:*.scons_opt=0;38;2;102;102;102:*CODEOWNERS=0;38;2;152;195;121:*SConstruct=0;38;2;152;195;121:*.gitconfig=0;38;2;152;195;121:*SConscript=0;38;2;152;195;121:*README.txt=0;38;2;40;44;52;48;2;229;192;123:*.synctex.gz=0;38;2;102;102;102:*MANIFEST.in=0;38;2;152;195;121:*Makefile.am=0;38;2;152;195;121:*.travis.yml=0;38;2;152;195;121:*.gitmodules=0;38;2;152;195;121:*LICENSE-MIT=0;38;2;153;153;153:*Makefile.in=0;38;2;102;102;102:*INSTALL.txt=0;38;2;40;44;52;48;2;229;192;123:*.applescript=0;38;2;152;195;121:*CONTRIBUTORS=0;38;2;40;44;52;48;2;229;192;123:*appveyor.yml=0;38;2;152;195;121:*configure.ac=0;38;2;152;195;121:*.fdb_latexmk=0;38;2;102;102;102:*.clang-format=0;38;2;152;195;121:*LICENSE-APACHE=0;38;2;153;153;153:*.gitattributes=0;38;2;152;195;121:*CMakeCache.txt=0;38;2;102;102;102:*CMakeLists.txt=0;38;2;152;195;121:*CONTRIBUTORS.md=0;38;2;40;44;52;48;2;229;192;123:*requirements.txt=0;38;2;152;195;121:*CONTRIBUTORS.txt=0;38;2;40;44;52;48;2;229;192;123:*.sconsign.dblite=0;38;2;102;102;102:*package-lock.json=0;38;2;102;102;102:*.CFUserTextEncoding=0;38;2;102;102;102"

  # source Google Cloud SDK completions
  # source "/usr/local/Caskroom/google-cloud-sdk/latest/google-cloud-sdk/path.fish.inc"
end
